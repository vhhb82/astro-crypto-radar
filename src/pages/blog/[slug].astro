```astro
---
import { getCollection } from 'astro:content';
import BlogPost from '../../layouts/BlogPost.astro';


export async function getStaticPaths() {
const posts = await getCollection('blog');
return posts
.filter((p) => !p.data.draft)
.map((p) => ({ params: { slug: p.slug }, props: { post: p } }));
}


const { post } = Astro.props;
const { Content, headings } = await post.render();
---
<BlogPost frontmatter={post.data}>
<Content />
</BlogPost>
```